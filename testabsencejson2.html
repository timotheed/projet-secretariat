<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Une absence</title>
       <link rel="stylesheet" href="style.css" type="text/css" media="all" />
       <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/themes/base/jquery-ui.css" type="text/css" media="all" />
       <link rel="stylesheet" href="http://static.jquery.com/ui/css/demo-docs-theme/ui.theme.css" type="text/css" media="all" />
 
       <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js" type="text/javascript"></script>
       <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/jquery-ui.min.js" type="text/javascript"></script>
  </head>

  <body>
    <h1>absence</h1>
    <input id='retour' type="button" value="retour"/>
    <form>
      <input list="nomDuProf" id='nom' placeholder="NOM DU PROF" name="q" /><br>
      <datalist id="nomDuProf">
      </datalist>
            <br/>
      <input list="nomDuCours" id='nomCours' placeholder="NOM DU COURS" name="p" /><br>
      <datalist id="nomDuCours">
      </datalist>
     
      <input id='confirmer' type='button' value='confirmer'/>
     
      </form>
      <p id='resultat'></p>
      
      
      <script>
      
	var xmlhttp = new XMLHttpRequest();
	var url = "donnees_profs.txt";
	var cetobj ={} ;
	var n =0;

xmlhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
        var myArr = JSON.parse(this.responseText);
        myFunction(myArr);
        mFunction(myArr);
    };
};
xmlhttp.open("GET", url, true);
xmlhttp.send();

function myFunction(arr) {
	for (var i in arr.profs) {
	document.getElementById("nomDuProf").innerHTML += '<option value="'+arr.profs[i].name+'">';
	};	
};

function mFunction(arr) {
	
	document.getElementById("nomCours").addEventListener("focus",function(){
	n = 0 ;
	while(arr.profs[n].name != nom.value){
	n++;
	};
	document.getElementById("nomDuCours").innerHTML = "";
        for (var o in arr.profs[n].cours){
        document.getElementById("nomDuCours").innerHTML += '<option value="'+arr.profs[n].cours[o]+'">';
        };
        });
        document.getElementById("confirmer").addEventListener("click",function(){
        cetobj.prof = nom.value,
        cetobj.cours = nomCours.value;
        document.getElementById("resultat").innerHTML = cetobj.prof+" : "+cetobj.cours;
        });
};
      </script>








    
  </body>
</html>
